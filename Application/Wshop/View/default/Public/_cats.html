        <div class="all-cats-list">
            <volist name="cats" id="cats"> 
            <div class="item">
                <h3>
                <a href="{$cats.link}">{$cats.title}</a>
                </h3>
                <if condition="$cats['items']">
                <div class="item-list clearfix" style="display: none;">
                    <div class="close">x</div>
                    <div class="subitem">
                        <volist name="cats.items" id="child">
                            <dl class="fore1">
                                <dt><a href="{$child.title}">{$child.title}</a></dt>
                                <dd><em><a href="#">免费</a></em><em><a href="#">小说</a></em><em><a href="#">励志与成功</a></em><em><a href="#">婚恋/两性</a></em><em><a href="#">文学</a></em><em><a href="#">经管</a></em><em><a href="#">畅读VIP</a></em></dd>
                            </dl>
                        </volist>
                    </div>
                    <div class="cat-right">

                    </div>
                </div>
                </if>
            </div>
            </volist>
        </div>

        <script type="text/javascript">
        (function($){
            $('.all-cats-list > .item').hover(function(){
            var eq = $('.all-cats-list > .item').index(this),               //获取当前滑过是第几个元素
                h = $('.all-cats-list').offset().top,                       //获取当前下拉菜单距离窗口多少像素
                s = $(window).scrollTop(),                                  //获取游览器滚动了多少高度
                i = $(this).offset().top,                                   //当前元素滑过距离窗口多少像素
                item = $(this).children('.item-list').height(),             //下拉菜单子类内容容器的高度
                sort = $('.all-cats-list').height();                        //父类分类列表容器的高度
            
            if ( item < sort ){                                             //如果子类的高度小于父类的高度
                if ( eq == 0 ){
                    $(this).children('.item-list').css('top', (i-h));
                } else {
                    $(this).children('.item-list').css('top', (i-h)+1);
                }
            } else {
                if ( s > h ) {                                              //判断子类的显示位置，如果滚动的高度大于所有分类列表容器的高度
                    if ( i-s > 0 ){                                         //则 继续判断当前滑过容器的位置 是否有一半超出窗口一半在窗口内显示的Bug,
                        $(this).children('.item-list').css('top', (s-h)+2 );
                    } else {
                        $(this).children('.item-list').css('top', (s-h)-(-(i-s))+2 );
                    }
                } else {
                    $(this).children('.item-list').css('top', 3 );
                }
            }   

            $(this).addClass('hover');
            $(this).children('.item-list').css('display','block');
            },function(){
                $(this).removeClass('hover');
                $(this).children('.item-list').css('display','none');
            });

            $('.item > .item-list > .close').click(function(){
                $(this).parent().parent().removeClass('hover');
                $(this).parent().hide();
            });
        })(jQuery);
        
    </script>
